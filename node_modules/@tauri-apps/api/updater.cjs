"use strict";var l=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var D=Object.prototype.hasOwnProperty;var P=(e,t)=>{for(var r in t)l(e,r,{get:t[r],enumerable:!0})},g=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of A(t))!D.call(e,o)&&o!==r&&l(e,o,{get:()=>t[o],enumerable:!(i=v(t,o))||i.enumerable});return e};var w=e=>g(l({},"__esModule",{value:!0}),e);var O={};P(O,{checkUpdate:()=>N,installUpdate:()=>h,onUpdaterEvent:()=>p});module.exports=w(O);function T(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function s(e,t=!1){let r=T(),i=`_${r}`;return Object.defineProperty(window,i,{value:o=>(t&&Reflect.deleteProperty(window,i),e==null?void 0:e(o)),writable:!1,configurable:!0}),r}async function m(e,t={}){return new Promise((r,i)=>{let o=s(n=>{r(n),Reflect.deleteProperty(window,`_${a}`)},!0),a=s(n=>{i(n),Reflect.deleteProperty(window,`_${o}`)},!0);window.__TAURI_IPC__({cmd:e,callback:o,error:a,...t})})}async function u(e){return m("tauri",e)}async function f(e,t){return u({__tauriModule:"Event",message:{cmd:"unlisten",event:e,eventId:t}})}async function U(e,t,r){await u({__tauriModule:"Event",message:{cmd:"emit",event:e,windowLabel:t,payload:r}})}async function d(e,t,r){return u({__tauriModule:"Event",message:{cmd:"listen",event:e,windowLabel:t,handler:s(r)}}).then(i=>async()=>f(e,i))}async function _(e,t,r){return d(e,t,i=>{r(i),f(e,i.id).catch(()=>{})})}async function E(e,t){return d(e,null,t)}async function y(e,t){return _(e,null,t)}async function c(e,t){return U(e,void 0,t)}async function p(e){return E("tauri://update-status",t=>{e(t==null?void 0:t.payload)})}async function h(){let e;function t(){e&&e(),e=void 0}return new Promise((r,i)=>{function o(a){if(a.error)return t(),i(a.error);if(a.status==="DONE")return t(),r()}p(o).then(a=>{e=a}).catch(a=>{throw t(),a}),c("tauri://update-install").catch(a=>{throw t(),a})})}async function N(){let e;function t(){e&&e(),e=void 0}return new Promise((r,i)=>{function o(n){return t(),r({manifest:n,shouldUpdate:!0})}function a(n){if(n.error)return t(),i(n.error);if(n.status==="UPTODATE")return t(),r({shouldUpdate:!1})}y("tauri://update-available",n=>{o(n==null?void 0:n.payload)}).catch(n=>{throw t(),n}),p(a).then(n=>{e=n}).catch(n=>{throw t(),n}),c("tauri://update").catch(n=>{throw t(),n})})}
